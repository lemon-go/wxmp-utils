{"version":3,"file":"Subject.js","sourceRoot":"","sources":["../../src/Subject.ts"],"names":[],"mappings":"AAAA,sDAAsD;AACtD,+GAA+G;AAG/G,OAAO,EAAE,mBAAmB,EAAE,MAAM,SAAS,CAAC;AAE9C,2DAA2D;AAC3D;IAOI;QACI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACxB,CAAC;IAEM,sBAAI,GAAX,UAAY,IAAO;QACf,KAAuB,UAAc,EAAd,KAAA,IAAI,CAAC,SAAS,EAAd,cAAc,EAAd,IAAc,EAAE;YAAlC,IAAM,QAAQ,SAAA;YACf,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACvB;IACL,CAAC;IAEM,uBAAK,GAAZ,UAAa,GAAQ;QACjB,KAAuB,UAAc,EAAd,KAAA,IAAI,CAAC,SAAS,EAAd,cAAc,EAAd,IAAc,EAAE;YAAlC,IAAM,QAAQ,SAAA;YACf,IAAI,QAAQ,CAAC,KAAK,EAAE;gBAChB,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACvB;SACJ;IACL,CAAC;IAEM,0BAAQ,GAAf;QACI,KAAuB,UAAc,EAAd,KAAA,IAAI,CAAC,SAAS,EAAd,cAAc,EAAd,IAAc,EAAE;YAAlC,IAAM,QAAQ,SAAA;YACf,IAAI,QAAQ,CAAC,QAAQ,EAAE;gBACnB,QAAQ,CAAC,QAAQ,EAAE,CAAC;aACvB;SACJ;IACL,CAAC;IAEM,2BAAS,GAAhB,UAAiB,QAA8B;QAC3C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC9B,OAAO,IAAI,mBAAmB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IACnD,CAAC;IACL,cAAC;AAAD,CAAC,AArCD,IAqCC","sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\n\nimport { IStreamResult, IStreamSubscriber, ISubscription } from \"./Stream\";\nimport { SubjectSubscription } from \"./Utils\";\n\n/** Stream implementation to stream items to the server. */\nexport class Subject<T> implements IStreamResult<T> {\n    /** @internal */\n    public observers: Array<IStreamSubscriber<T>>;\n\n    /** @internal */\n    public cancelCallback?: () => Promise<void>;\n\n    constructor() {\n        this.observers = [];\n    }\n\n    public next(item: T): void {\n        for (const observer of this.observers) {\n            observer.next(item);\n        }\n    }\n\n    public error(err: any): void {\n        for (const observer of this.observers) {\n            if (observer.error) {\n                observer.error(err);\n            }\n        }\n    }\n\n    public complete(): void {\n        for (const observer of this.observers) {\n            if (observer.complete) {\n                observer.complete();\n            }\n        }\n    }\n\n    public subscribe(observer: IStreamSubscriber<T>): ISubscription<T> {\n        this.observers.push(observer);\n        return new SubjectSubscription(this, observer);\n    }\n}\n"]}